
trigger:
- main

resources:
  containers:
    - container: mssql
      image: mcr.microsoft.com/mssql/server:2019-latest
      ports:
        - 1433
      env:
        ACCEPT_EULA: Y
        SA_PASSWORD: $(MSSQL_SA_PASSWORD)

variables:
  MSSQL_SA_PASSWORD: yourStrong(!)Password

pool:
  vmImage: ubuntu-latest

services:
  sqlserver: mssql

steps:
- task: DockerInstaller@0
  displayName: "Docker: Install tool"
  inputs:
    dockerVersion: "20.10.20"

- script: |
    docker run --rm --network $AGENT_CONTAINERNETWORK flcdrg/wait-for-mssql --server sqlserver --username sa --password $(MSSQL_SA_PASSWORD)